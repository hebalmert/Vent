<EditForm EditContext="_editContext" OnValidSubmit="OnSubmit">
    <DataAnnotationsValidator />

    <MudDatePicker Label="Registro" Class="mb-4"
                   Date="@Sell.SellDate"
                   DateChanged="DateSellChanged"
                   MinDate="DateMin"
                   StartMonth="DateStart"
                   ShowToolbar="false"
                   DateFormat="dd.MM.yyyy" ReadOnly="true" />

    @if (Usuarios is null)
    {
        <Loading />
    }
    else
    {
        <MudSelect T="Usuario" Class="mb-5"
                   Label="Vendedor"
                   Value="SelectedUsuario"
                   ValueChanged="UsuarioChanged"
                   ToStringFunc="@(e=> e==null ? null : $"{e.FullName}")"
                   For="@(() => Sell.Usuario)">
            @foreach (var item in Usuarios!)
            {
                <MudSelectItem Value="item">@item.FullName</MudSelectItem>
            }
        </MudSelect>
    }

    @if (Clientes is null)
    {
        <Loading />
    }
    else
    {
        <MudSelect T="Client" Class="mb-5"
                   Label="Cliente"
                   Value="SelectedClient"
                   ValueChanged="ClientChanged"
                   ToStringFunc="@(e=> e==null?null : $"{e.FullName}")"
                   For="@(() => Sell.Client)">
            @foreach (var item in Clientes!)
            {
                <MudSelectItem Value="item">@item.FullName</MudSelectItem>
            }
        </MudSelect>
    }

    @if (Clientes is null)
    {
        <Loading />
    }
    else
    {
        <MudSelect T="PaymentType" Class="mb-5"
                   Label="Tipo Pago"
                   Value="SelectedPaymentType"
                   ValueChanged="PaymentChanged"
                   ToStringFunc="@(e=> e==null?null : $"{e.PaymentName}")"
                   For="@(() => Sell.PaymentType)">
            @foreach (var item in PaymentTypes!)
            {
                <MudSelectItem Value="item">@item.PaymentName</MudSelectItem>
            }
        </MudSelect>
    }
    
    @if (ProductStorages is null)
    {
        <Loading />
    }
    else
    {
        <MudSelect T="ProductStorage" Class="mb-5"
                   Label="Bodega"
                   Value="SelectedProductStorage"
                   ValueChanged="ProductStorageChanged"
                   ToStringFunc="@(e=> e==null?null : $"{e.StorageName}")"
                   For="@(() => Sell.ProductStorage)">
            @foreach (var item in ProductStorages!)
            {
                <MudSelectItem Value="item">@item.StorageName</MudSelectItem>
            }
        </MudSelect>
    }

    <br />
    <div class="mb-4" style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;">
        <MudButton Variant="Variant.Filled"
                   StartIcon="@Icons.Material.Filled.ArrowBack"
                   Color="Color.Surface"
                   OnClick="ReturnAction">
            Volver
        </MudButton>
        <MudButton Variant="Variant.Filled"
                   StartIcon="@Icons.Material.Filled.Save"
                   Color="Color.Dark"
                   ButtonType="ButtonType.Submit">
            Guardar
        </MudButton>
    </div>
</EditForm>
